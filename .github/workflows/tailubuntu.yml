name: Tailscale Ubuntu VNC - Docker

on: 
  workflow_dispatch:
 
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: chuáº©n bá»‹ pháº§n má»m
        run: |
          sudo apt update -y
          sudo apt install wget curl -y
          curl -fsSL https://tailscale.com/install.sh | sh
          sudo tailscale up
      - name : IP tailscale
        run : |
         echo "IP ðŸ‘‡"
         tailscale ip -4 
         echo "nhá»› káº¿t ná»•i vs port 5900 (vnc) vÃ  8080 (web) nha"
      - name: cÃ i Ä‘áº·t ubuntu
        run: |
          echo "Äang Táº£i NoVNC port 5900"
          sudo apt -y install novnc python3-websockify python3-numpy &>/dev/null &
          while ps axg | grep -vw grep | grep -w wget > /dev/null; do sleep 1; done
          websockify -D --web=/usr/share/novnc/ 6080 localhost:5900 &>/dev/null &
          while ps axg | grep -vw grep | grep -w wget > /dev/null; do sleep 1; done
          echo " Táº£i NoVNC port 5900 Ä‘Ã£ xong"
          echo " Thiáº¿t Láº­p Ubuntu KÃ­ch Hoáº¡t TuNoiDongXanhThomHuonglua"
          docker run -p 8080:80 dorowu/ubuntu-desktop-lxde-vnc
